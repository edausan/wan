"use strict";(self.webpackChunkwan_bagtas=self.webpackChunkwan_bagtas||[]).push([[2645],{2645:function(l,n,e){e.r(n),e.d(n,{EditLineupCtx:function(){return C}});var t=e(1413),s=e(5861),u=e(9439),i=e(7757),a=e.n(i),o=e(2791),r=e(5646),d=e(9658),c=e(1889),m=e(7621),f=e(7391),g=e(8388),b=e(422),p=e(587),h=e(3915),v=e(9783),y=e(4681),x=e(2426),S=e.n(x),Z=e(9271),j=e(8439),w=e(9431),_=e(5907),L=e(184),D=(0,o.lazy)((function(){return Promise.all([e.e(6886),e.e(222)]).then(e.bind(e,8429))})),k=(0,o.lazy)((function(){return Promise.all([e.e(5966),e.e(2878)]).then(e.bind(e,2878))})),C=(0,o.createContext)(null),J=function(){var l,n=(0,Z.UO)(),e=(0,j.v0)(w.O).currentUser,i=(0,Z.k6)(),x=(0,o.useContext)(b.t).scrollToTop,C=(0,o.useState)(new Date),J=(0,u.Z)(C,2),N=J[0],P=J[1],z=(0,o.useState)([]),T=(0,u.Z)(z,2),E=T[0],O=T[1],U=(0,o.useState)(!1),A=(0,u.Z)(U,2),V=A[0],W=A[1],R=(0,o.useState)(!1),X=(0,u.Z)(R,2),q=X[0],F=X[1],G=(0,o.useState)(null),H=(0,u.Z)(G,2),I=H[0],K=H[1],$=(0,o.useState)([]),B=(0,u.Z)($,2),M=B[0],Q=B[1],Y=(0,o.useState)(!1),ll=(0,u.Z)(Y,2),nl=ll[0],el=ll[1],tl=(0,y.j1)().data;(0,o.useEffect)((function(){x(),tl&&Q(tl)}),[tl]),(0,o.useEffect)((function(){il()}),[]),(0,o.useEffect)((function(){n.id&&tl.length>0&&sl()}),[n.id,tl]);var sl=function(){var l=(0,s.Z)(a().mark((function l(){var e,s,u;return a().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,y.$$)({id:n.id});case 3:e=l.sent,console.log({GetLineup_songs_data:tl}),e&&(console.log({lineup:e}),K(null===e||void 0===e?void 0:e.service),P(null===e||void 0===e?void 0:e.date),(null===tl||void 0===tl?void 0:tl.length)>0&&(s=null===e||void 0===e?void 0:e.songs.map((function(l){console.log({song:l});var n=tl.filter((function(n){return n.id===l.id}))[0];return(0,t.Z)((0,t.Z)({},l),n)})),u=g.Pt.map((function(l){var n=s.filter((function(n){return n.label===l.label}))[0];return n||l})),O(u))),l.next=10;break;case 8:l.prev=8,l.t0=l.catch(0);case 10:case"end":return l.stop()}}),l,null,[[0,8]])})));return function(){return l.apply(this,arguments)}}();(0,o.useEffect)((function(){console.log({EDIT:E})}),[E]);var ul=function(){var l=(0,s.Z)(a().mark((function l(){var t;return a().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return W(!0),t={id:n.id,lineup:{service:I,songs:E,date:S()(N).format("LLLL"),date_updated:S()(new Date).format("LLLL"),updated_by:{email:e.email,uid:e.uid,displayName:e.displayName,photoURL:e.photoURL}}},console.log({data:t}),l.next=5,(0,y.zP)(t);case 5:setTimeout((function(){W(!1),F(!0),setTimeout((function(){F(!1),i.push("/lineup")}),1e3)}),1e3);case 6:case"end":return l.stop()}}),l)})));return function(){return l.apply(this,arguments)}}(),il=function(){var l=new Date,n=l.getDate()-l.getDay()+1+6,e=new Date(l.setDate(n));return P(e),e},al=function(){F(!1)};return(0,L.jsxs)("section",{style:{position:"relative",paddingBottom:100},children:[(0,L.jsx)(r.Z,{open:q,autoHideDuration:1e3,onClose:al,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,L.jsx)(d.Z,{onClose:al,severity:"success",sx:{width:"100%"},children:n.id?"Lineup successfully updated":"New Lineup successfully created!"})}),(null===E||void 0===E?void 0:E.length)>0&&(null===(l=E[2])||void 0===l?void 0:l.title)&&I&&(0,L.jsxs)("button",{className:"fixed bottom-[86px] right-[26px] w-[40px] h-[40px]  bg-green-500 text-white rounded-full z-50",onClick:ul,disabled:V,children:[(0,L.jsx)("span",{className:"motion-safe:animate-ping absolute top-0 left-0 w-[100%] h-[100%] bg-green-500 text-black rounded-full z-40 opacity-30"}),(0,L.jsx)(_.Z,{})]}),(0,L.jsxs)(c.ZP,{container:!0,justifyContent:"center",spacing:2,children:[(0,L.jsx)(c.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(m.Z,{sx:{p:2,mb:2},children:[(0,L.jsx)("button",{onClick:function(){return el(!0)},className:"p-2 w-full bg-sky-400 rounded-md mb-4",children:I||"Select Worship Service"}),(0,L.jsx)(D,{setOpen:el,open:nl,service:I,setService:K}),(0,L.jsx)(h.Z,{dateAdapter:v.Z,children:(0,L.jsx)(p.Z,{required:!0,inputFormat:"dddd LL",label:"Date",value:N,onChange:function(l){P(l)},renderInput:function(l){return(0,L.jsx)(f.Z,(0,t.Z)((0,t.Z)({},l),{},{fullWidth:!0,size:"small",variant:"standard"}))}})})]})}),(0,L.jsx)(c.ZP,{item:!0,xs:12,md:12,children:(null===E||void 0===E?void 0:E.length)>0&&(null===M||void 0===M?void 0:M.length)>0&&g.Pt.map((function(l,n){return(0,L.jsx)(k,{setLineupData:O,category:l,songs:M,songData:E.filter((function(n){return(null===n||void 0===n?void 0:n.label)===l.label}))[0],saving:V},l.id+n)}))})]})]})};n.default=o.memo(J)},8388:function(l,n,e){e.d(n,{GN:function(){return u},K7:function(){return i},Pt:function(){return t},em:function(){return s}});var t=[{id:"os-1",label:"Opening Song",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!0,tags:["Solemn"]},{id:"ws-1",label:"Welcome Song",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!1,tags:["Joyful"]},{id:"js-1",label:"Joyful Song #1",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!1,tags:["Joyful"]},{id:"js-2",label:"Joyful Song #2",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!1,tags:["Joyful"]},{id:"js-3",label:"Joyful Song #3",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!1,tags:["Joyful"]},{id:"ss-1",label:"Solemn Song #1",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!0,tags:["Solemn"]},{id:"ss-2",label:"Solemn Song #2",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!0,tags:["Solemn"]},{id:"ss-3",label:"Solemn Song #3",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!0,tags:["Solemn"]},{id:"ps-1",label:"Pastoral Song",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!0,tags:["Solemn"]},{id:"vs-1",label:"Victory Song",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!1,tags:["Joyful"]},{id:"vs-2",label:"Victory Song #2",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!1,tags:["Joyful"]},{id:"vs-3",label:"Victory Song #3",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!1,tags:["Joyful"]},{id:"cs-1",label:"Closing Song",artist:null,album:null,lyrics:null,chords:null,media:null,song:null,disabled:!1,is_solemn:!0,tags:["Solemn"]}],s="k4gcy3yNWqa02aUfhw8J4fn7sS63",u="Hfhcau8TAiXR4T4FEAXp7eipDvz2",i="46NVNKry9DhU1tTX3QrmM1OjudA3"}}]);
//# sourceMappingURL=2645.44ab7e52.chunk.js.map